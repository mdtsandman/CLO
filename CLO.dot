digraph LungMass {

rankdir=TB;
newrank=true;
compound=true;

node [style=filled color=grey fillcolor=grey];
edge [arrowhead=none];

US [label="Antenatal US"];
HighRisk [color=orange2 fillcolor=orange2 fontcolor=white label="Severe\nMediastinal Shift"];
LowRisk [color=darkseagreen fillcolor=darkseagreen fontcolor=white label="No (or minor)\nMediastinal Shift"];
NRP [label="NRP\nPathway" style=filled fontcolor=white fillcolor=darkseagreen color=darkseagreen];
HFJV [label="HFJV\nPathway" style=filled fontcolor=white fillcolor=orange2 color=orange2];
EXIT [label="EXIT\nPathway" style=filled fontcolor=white fillcolor=indianred color=indianred];

subgraph ClusterCVR {

	style=rounded;
	color=white;
	bgcolor=white;

	CVRTrend [label="Serial\nUltrasound"];
	GoodTrend [label="Reassuring" fillcolor=darkseagreen color=darkseagreen fontcolor=white];
	BadTrend [label="Worrisome" fillcolor=orange2 color=orange2 fontcolor=white];

}
		
subgraph ClusterMRI {
	
	style=rounded;
	color=white;
	bgcolor=white;

	MRI [label="Serial Ultrasound +\nMRI for Lung Volume"];
	MildHP [label="Reassuring" fillcolor=darkseagreen color=darkseagreen fontcolor=white];
	SevereHP [label="Worrisome" fillcolor=orange2 color=orange2 fontcolor=white];

}

subgraph ClusterMRI2 {

	style=rounded;
	color=white;
	bgcolor=white;

	MRI2 [label="Late\nGestation\nMRI"];
	MildHP2 [label="Mild Hypoplasia\nwithout\nMediastinal Shift" fillcolor=darkseagreen color=darkseagreen fontcolor=white];
	ModerateHP2 [label="Moderate\nHypoplasia +\nMediastinal Shift" fillcolor=orange2 color=orange2 fontcolor=white];
	SevereHP2 [label="Severe\nHypoplasia +\nMediastinal Shift" fillcolor=indianred color=indianred fontcolor=white];

}

US -> {HighRisk, LowRisk};
LowRisk -> CVRTrend[arrowhead=vee weight=100];
CVRTrend -> GoodTrend [weight=200];
GoodTrend -> NRP [arrowhead=vee weight=100];
CVRTrend -> BadTrend;
HighRisk -> MRI [arrowhead=vee weight=200];
BadTrend -> MRI2 [arrowhead=vee];
MRI -> {MildHP SevereHP};
MildHP -> CVRTrend [arrowhead=vee];

SevereHP -> MRI2 [arrowhead=vee weight=100];

MRI2 -> {MildHP2 ModerateHP2 SevereHP2} [weight=100];

MildHP2 -> NRP [arrowhead=vee];
ModerateHP2 -> HFJV [arrowhead=vee];
SevereHP2 -> EXIT [arrowhead=vee weight=200];

NRP -> HFJV -> EXIT [style=invis];

{ rank=same; GoodTrend BadTrend };
{ rank=same; MildHP SevereHP }
{ rank=same; LowRisk; HighRisk; }
{ rank=same; MildHP2; SevereHP2; }
{ rank=same; LowRisk; HighRisk; }
{ rank=same; NRP; HFJV; EXIT; }

}
