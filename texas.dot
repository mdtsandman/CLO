digraph Texas {

newrank=true;
rankdir=TB;
compound=true;
center=true;

node [fontsize=20];
edge [arrowhead=vee];

subgraph clusterNRP {

	label=<<TABLE CELLPADDING="12"><TR><TD>NRP</TD></TR></TABLE>>;
	fontsize=34;
	fontcolor="white";
	style="rounded";	
	color=darkseagreen;
	bgcolor=darkseagreen;
	
//	node [shape=none fixedsize=true width=3 height=0.75 fontsize=20];
	node [shape=box color=darkseagreen];

	TopNRP [label="" shape=box fixedwidth=true width=3.0 height=0 style=invis];
	StandardDelivery [label="Deliver baby"];
	NRP [label=NRP];
	Delay [label="Grow baby\n(3-9 mo)" height=0.9];
	VATS [label="Resect mass\n(VATS?)" color=darkseagreen];
	BottomNRP [label="" shape=point style=invis];
	
	TopNRP -> StandardDelivery [style=invis];
	StandardDelivery -> NRP -> Delay -> VATS
	VATS -> BottomNRP [style=invis];

}

subgraph clusterPartialEXIT {

	label=<<TABLE CELLPADDING="12"><TR><TD>Partial EXIT</TD></TR></TABLE>>;
	fontsize=34;
	fontcolor="white";
	style=rounded;
	color= orange2;
	bgcolor= orange2;

	node [shape=box color=white];

	TopExt [label="" shape=point style=invis];

	subgraph clusterMFB {
	
		label="Placental\nSupport";
		fontcolor=orange2;	
		fontsize=24;
		color=white;
		bgcolor=white;

		DeliverTop [label="Deliver thorax" fixedsize=true width=3.5];
		ETT [label="Intubate"];
		Cut [label="Thoracotomy"];
		PPV [label="Try PPV"];
		OK [label="Okay" shape=ellipse style=filled color=white fillcolor=darkgreen fontcolor=white];
		Dummy [label="" shape=point style=invis];
		Nope [label="Nope" shape=ellipse style=filled color=white fillcolor=red fontcolor=white];
		DeliverTop -> ETT -> Cut -> PPV -> {Nope OK};

	}

	DeliverBottom [label="Deliver baby\n& resect mass" color=orange2];
	BottomExt [label="" shape=point style=invis];
	
	TopExt -> DeliverTop [style=invis];
	OK -> DeliverBottom;
	DeliverBottom -> BottomExt [style=invis];
	
}

subgraph clusterFullEXIT {

	label=<<TABLE CELLPADDING="12"><TR><TD>Full EXIT</TD></TR></TABLE>>;
	fontsize=34;
	fontcolor="white";
	style=rounded;
	color=indianred;
	bgcolor=indianred;

	node [shape=box color=white];
	
	TopEXIT [label="" shape=box fixedwidth=true width=3 height=0 style=invis];

	subgraph clusterMFB2 {
	
		label="Placental\nSupport";
		fontcolor=indianred;
		fontsize=24;
		color=white;
		bgcolor=white;

		DeliverTop2 [label="Deliver thorax" fixedsize=true width=2.8];
		Cut2 [label="Thoracotomy"];
		ResectMFB [label="Resect mass"];
		DeliverTop2 -> Cut2 -> ResectMFB[weight=100];

	}

	DeliverBottom2 [label="Deliver\nbaby" color=indianred];
	BottomEXIT [label="" shape=point style=invis];
	
	TopEXIT -> DeliverTop2 [style=invis];
	ResectMFB -> DeliverBottom2[weight=100];
	DeliverBottom2 -> BottomEXIT [style=invis];

}


{ rank=same TopNRP TopExt TopEXIT }
{ rank=same StandardDelivery DeliverTop DeliverTop2 }
{ rank=same NRP Cut Cut2 }
{ rank=same Delay OK Dummy Nope ResectMFB }
{ rank=same VATS DeliverBottom DeliverBottom2 }
{ rank=same BottomNRP BottomExt BottomEXIT }

TopNRP -> TopExt -> TopEXIT [style=invis];
Nope -> ResectMFB [constraint=false];

}
